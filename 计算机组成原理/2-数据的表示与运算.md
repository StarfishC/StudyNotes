# 数据的表示与运算

**概览：**

**[:question: 数制与编码](#数制与编码)**  
**[:question: 定点数的表示](#定点数的表示 )**

## 数制与编码

### 进位计数制

#### 进制

- 二进制：0,1
- 八进制：0,1,2,3,4,5,6,7
- 十进制：0,1,2,3,4,5,6,7,8,9
- 十六进制：0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F

#### 进制的转换

r 进制： $K_nK_{n-1}...K_2K_1K_0K_{-1}K_{-2}...K_{-m}$

- 任意进制转为十进制  
  r 进制：$K_n×r^n + K_{n-1}×r^{n-1}+...+K_2×r^2+K_1×r^1+K_0×r^0+K{-1}×r^{-1}+K_{-2}×r^{-2}+...+K_{-m}×r{-m}$
  > $(10.110)_2$ $1×2^1+0×2^0+1×2^{-1}+1×2^{-2}=2.75$  
  > $(5.4)_8$ $5×8^0+4×8^{-1}$
- 十进制转为任意进制
  > $K_n×r^n + K_{n-1}×r^{n-1}+...+K_2×r^2+K_1×r^1+K_0×r^0+K{-1}×r^{-1}+K_{-2}×r^{-2}+...+K_{-m}×r{-m} / r = K_n×r^{n-1}+K_{n-1}×r^{n-2}+...+K_2×r^1+K_1×r^0 余k_0$
  >
  > <div align="center"><img src="./images/2-数据的表示与运算/十进制转任意进制例子.png" alt="" height=150 width= /></div>
  >
  > <div align="center"><img src="./images/2-数据的表示与运算/十进制转任意进制例子2.png" alt="" height= width= /></div>
  >
  > <div align="center"><img src="./images/2-数据的表示与运算/十进制小数部分转换.png" alt="" height= width= /></div>
  >
  > 十进制转非二进制其他进制时，比如八进制、十六进制，可以先转成二进制再进行转换
- 二进制转八进制、十六进制
  <div align="center"><img src="./images/2-数据的表示与运算/二进制转八进制-十六进制.png" alt="" height= width= /></div>

### BCD 码

- 8421 码：4 个二进制有 16 种不同的状态，8421BCD 码使用其中 10 种
  | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
  | - | - | - | - | - | - | - | - | - | - |
  | 0000 | 0001 | 0010 | 0011 | 0100 | 0101 | 0110 | 0111 | 1000 | 1001 |
- 余三码：8421 码 + 0011B
  | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
  | - | - | - | - | - | - | - | - | - | - |
  | 0011 | 0100 | 0101 | 0110 | 0111 | 1000 | 1001 | 1010 | 1011 | 1100 |
- 2421 码：改变权值定义，并且大于 5 的最高位为 1
  | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
  | - | - | - | - | - | - | - | - | - | - |
  | 0000 | 0001 | 0010 | 0011 | 0100 | 1011 | 1100 | 1101 | 1110 | 1111 |

### 字符与字符串

- 字符的表示
  普遍采用 8 二进制的 ASCII 码表示（包括数字、字母、符号）
- 字符串的表示

  - 从低地址到高地址逐个字符存储，常采用'\0'作为结尾标志
  - 对于多字节的数据（如汉字），可采用大/小端存储模式
  - 大端模式：将数据的最高有效字节存放在低地址单元中
  - 小端模式：将数据的最高有效字节存放在高地址单元中
  - 例：某计算机按字节编址，从地址为 2 的单元开始，存储字符串“abc 啊”

    ```txt
    各字符的ASCII编码
    a: 0110 0001 = 61H
    b: 0110 0010 = 62H
    c: 0110 0011 = 63H
    啊：机内码 = B0 A1H
    \0: 0000 0000 = 00H
    ```

    <div align="center"><img src="./images/2-数据的表示与运算/字符串存储.png" alt="" height= width= /></div>

### 奇偶校验码

#### 校验原理

由若干位代码组成的一个字叫码字。  
将两个码字逐位进行对比，具有不同的位的个数称为两个码字间的距离。  
一种编码方案可能由若干合法码字，各合法码字间的最小距离称为“码距”  
当码距=1 时，无检错能力；当码距=2 时，有检错能力；当码距 ≥3 时，若设计合理，可能具有检错、纠错力

```txt
编码：
A：100
B：001
C：010
D：111
任意两个编码比较，如100和001发现有两个位不一样，码距为2
```

#### 校验码

奇校验码：整个校验码（有效信息位和校验位）中的“1”的个数为奇数  
偶校验码：整个校验码（有效信息位和校验位）中的“1”的个数为偶数

例：给出两个编码 1001101 和 101011 的奇校验码和偶校验码

设最高位为校验位，余 7 位是信息位，则对应的奇偶校验码为：  
奇校验： 11001101 0101011  
偶校验： 01001101 1101011

<div align="center"><img src="./images/2-数据的表示与运算/偶校验.png" alt="偶校验" height= width= /></div>

奇偶校验码只有一个校验位，只能表示两种状态（对/错），也就是说只能确定有没有错误，但是无法确定是哪一位出错

### 海明校验码

设计思路：将信息位分组进行校验 -> 多个校验位 -> 多个校验位标注出错位置

需要多少个校验位?  
假设信息位有 n 个，校验位有 k 个（共 2^k 种状态）。那么信息位+校验位=n+k 位。那么需要$2^k≥n+k+1$（n+k 位中任何一个位都可能出错，1 表示一种正确状态）

海明码求解步骤：

- 确定校验位数量
- 确定校验位的分布
- 求校验位的值
- 检错纠错

信息位：1010

1. 确定海明码的位数：2^k >= n + k + 1
   n = 4 -> k = 3
   设信息位 $D_4D_3D_2D_1(1010)$，共 4 位，校验位$P_3P_2P_1$，共三位，对应的海明码为 $H_7H_6H_5H_4H_3H_2H_1$

2. 确定校验位的分布

校验位 P_i 放在海明位号为$2^{i-1}$的位置上，信息位按顺序放到其余位置

| H7  | H6  | H5  | H4  | H3  | H2  | H1  |
| --- | --- | --- | --- | --- | --- | --- |
| D4  | D3  | D2  | P3  | D1  | P2  | P1  |
| 1   | 0   | 1   |     | 0   |     |     |

3. 求校验位的值

H3 : 3 -> 011
H5 : 5 -> 101
H6 : 6 -> 110
H7 : 7 -> 111

P1、P2、P3为上述的第一位对应的信息位异或，如P1：1101，只有H3H5H7为1，则只用把D1D2D4的信息位异或即可
P1 = H3 ⊕ H5 ⊕ H7 = D1 ⊕ D2 ⊕ D4 = 0 ⊕ 1 ⊕ 1 = 0  
P2 = H3 ⊕ H6 ⊕ H7 = D1 ⊕ D3 ⊕ D4 = 0 ⊕ 0 ⊕ 1 = 1  
P3 = H5 ⊕ H6 ⊕ H7 = D2 ⊕ D3 ⊕ D4 = 1 ⊕ 0 ⊕ 1 = 0

4. 纠错

所以最后海明码为

| H7  | H6  | H5  | H4  | H3  | H2  | H1  |
| --- | --- | --- | --- | --- | --- | --- |
| D4  | D3  | D2  | P3  | D1  | P2  | P1  |
| 1   | 0   | 1   |  0  |  0  |  1  |  0  |

<div align="center"><img src="./images/2-数据的表示与运算/纠错.png" alt="" height= width= /></div>

### 循环冗余校验码

略过...

## 定点数的表示

定点数分为无符号数和有符号数

### 无符号数的表示

无符号数：整个机器字长的全部二进制位均为数值位，没有符号位，相当于数的绝对值（通常只有无符号整数，而没有无符号小数）

### 有符号数的表示

有符号数应固定好小数点的位置

<div align="center"><img src="./images/2-数据的表示与运算/有符号数.png" alt="" height= width= /></div>

注：可用原码、反码、补码三种方式来表示

### 机器数表示方法

#### 原码

最高位为符号位，其余各位为表示数的绝对值（0表示正，1表示负）

如：x = +1110 的原码是 $[x]_原=0,1110$ （用逗号将符号位和数值部分隔开）  
x=- 0.1101 的原码是 $[x]_原=1-(-0.1101)=1.1101$

若字长为n+1，则原码整数的表示范围 $-(2^n-1) ≤ 2^n-1$（关于原点对称），原码小数的表示范围是 $-(1-2^(-n)) ≤ X ≤ 1-2^(-n)$

原码特点：简单直观，但是使用原码作加法时，会出现如下问题

```txt
要求    数1    数2  |  实际操作  结果符号 |
加法    正     正   |  加       正      |
加法    正     负   |  减       可正可负 |
加法    正     正   |  减       可正可负 |
加法    正     正   |  加       正      |
```

只做加法时候实际操作有加有减，这样不好处理。能否找到一个与负数等价的正数，来代替这个负数，从而把加减法都变成加法

#### 补码

